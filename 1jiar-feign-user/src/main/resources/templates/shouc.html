<!DOCTYPE html>
<html
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:th="http://www.thymeleaf.org"
        xmlns:shiro="http://www.pollix.at/thymeleaf/shiro"
        xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3"
>
<head>
    <meta charset="UTF-8">
    <title>title</title>

</head>
<body>
<div th:include="/index.html"></div>




<table class="table" id="myTable"></table>




</body>


<script th:inline="none">
    $(function () {
        initHouseTable();    //初始化表格
    });
    function initHouseTable(){
        $('#myTable').bootstrapTable({
            toolbar:'#toolbar',
            url:"../queryhouse",
            type:"post",
            pagination:true, //是否展示分页
            pageList:[3, 10, 20, 50],//分页组件
            pageNumber:1,
            pageSize:3,//默认每页条数
            sidePagination:'server',//分页方式：client客户端分页，server服务端分页
            striped:true,//显示条纹状表格
            queryParams:function(){

                return {
                    page:this.pageNumber,
                    rows:this.pageSize,

                }
            },
            columns:[
                {field:"check",checkbox:true},
                {field:"houseId",title:"id"},
                {field:"houseaheName",title:"房名"},
                {field:"housePrice",title:"每月价格",
                    formatter: function(value,row,index){
                        return "人民币"+value+"元";
                    }},
                {field:"houseManName",title:"用户名"},
                {field:"agentName",title:"经纪人"},
                {field:"houseQuYuName",title:"区域名"},
                {field:"houseDiTieName",title:"地铁站名"},
                {field:"houseJianzhuMianji",title:"建筑面积"},
                {field:"houseTaoneiMianji",title:"套内面积"},
                {field:"houseTypeName",title:"户型"},
                {field:"houseUseName",title:"房屋类型"},
                {field:"houseFloorTypeName",title:"楼层类型"},
                {field:"houseDirectionName",title:"房屋朝向"},
                {field:"houseAgeName",title:"楼龄"},
                {field:"houseZuTypeName",title:"方式"},
                {field:"houseTeSeId",title:"特色"},
                {field:"houseZuQi",title:"租期",
                    formatter: function(value,row,index){
                        return value==1?"月租":value==2?"年租":"";
                    }},
                {field:"houseElevator",title:"有无电梯",
                    formatter: function(value,row,index){
                        return value==1?"有电梯":value==2?"没有电梯":"";
                    }},
                {field:"houseFinish",title:"是否装修",
                    formatter: function(value,row,index){
                        return value==1?"已装修":value==2?"未装修":"";
                    }},
                {field:"houseHeating",title:"是否供暖",
                    formatter: function(value,row,index){
                        return value==1?"已供暖":value==2?"未供暖":"";
                    }},
                {field:"ridgepoleName",title:"楼栋"},
                {field:"elementName",title:"单元"},
                {field:"doorplateName",title:"门牌号"},
                {field:'123',formatter:function(value,row,index){
                        return '<a href="javascript:shanchu('+row.houseId+');">删除</a>'
                    }}
            ]
        })
    }
    //单删
    function shanchu(houseId){
        bootbox.confirm({
            size:'small',
            message:"你确认要取消收藏吗",
            buttons:{
                confirm:{
                    label:'确认',
                    className:'btn-success'
                },
                cancel:{
                    label:'取消',
                    className: 'btn-danger'
                }
            },
            callback:function(result){
                if(result){
                    $.ajax({
                        url:"../deleteshouc",
                        type:'post',
                        data:{
                            houseId:houseId
                        },
                        dataType:'json',
                        success:function(data){
                            if(data){
                                tiaojianchaxun();
                            }else{
                                bootbox.alert({
                                    size:"small",
                                    title:"提示",
                                    message:"删除失败",
                                });
                            }

                        }

                    })
                }
            }
        })

    }

</script>
</html>